name: CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Build Docker Image
      run: make build
    - name: Bring up docker container
      run: |
          make network
          make up
          sleep 5
    - name: Container Tests
      run: |
          echo run basic xQuery expression
          docker exec xq ./bin/xqerl eval \
 'xqerl:run("xs:token(\"cats\"), xs:string(\"dogs\"), true() ").'
          printf %60s | tr ' ' '-' && echo ''
    - name: Take down docker container
      run: make down
